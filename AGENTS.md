# Instructions for AI Agents

## Overview

This is Hop, a Java client for the [RabbitMQ HTTP API](https://www.rabbitmq.com/docs/http-api-reference).
It provides two client implementations: a blocking client (JDK 11's `HttpClient`) and a reactive client (Reactor Netty).

## Target Java Version

This library targets Java 11 and later versions.

## Build System

Standard Maven commands apply:

 * `./mvnw clean package` to build
 * `./mvnw test` to run tests (requires a running RabbitMQ node)
 * `./mvnw spotless:apply` to reformat
 * `./mvnw clean install` to install locally

Always run `./mvnw compile` before making changes to verify the codebase compiles cleanly.

### Running Tests

Tests require a RabbitMQ node with the management plugin enabled.

For an agent, the optimizal option is to use the [RabbitMQ community OCI](https://github.com/docker-library/rabbitmqhttps://github.com/docker-library/rabbitmq):

```shell
docker run -it --rm --name rabbitmq -p 5672:5672 -p 15672:15672 rabbitmq:4-management

# in a separate shell
export HOP_RABBITMQCTL="DOCKER:rabbitmq"
./ci/before-build.sh
./mvnw test
```

To use a non-default management port: `./mvnw test -Drabbitmq.management.port=15673`

## Key Files

 * Blocking client: `src/main/java/com/rabbitmq/http/client/Client.java`
 * Reactive client: `src/main/java/com/rabbitmq/http/client/ReactorNettyClient.java`
 * HTTP layer abstraction: `src/main/java/com/rabbitmq/http/client/HttpLayer.java`
 * A JDK HTTP client wrapper: `src/main/java/com/rabbitmq/http/client/JdkHttpClientHttpLayer.java`
 * Domain models: `src/main/java/com/rabbitmq/http/client/domain/*.java`

## Test Suite Layout

 * `src/test/java/com/rabbitmq/http/client/ClientTest.java` is the main integration test suite
 * `src/test/java/com/rabbitmq/http/client/ReactorNettyClientTest.java` tests the reactive client
 * `src/test/java/com/rabbitmq/http/client/*Test.java` are other unit and integration tests

## Source of Domain Knowledge

 * [RabbitMQ HTTP API Reference](https://www.rabbitmq.com/docs/http-api-reference)
 * [RabbitMQ Documentation](https://www.rabbitmq.com/docs/)

Treat this documentation as the ultimate first party source of truth.

## Comments

 * Only add very important comments, both in tests and in the implementation
 * Keep comments concise and to the point

## Git Instructions

 * Do not commit changes automatically without explicit permission to do so
 * Never add yourself as a git commit coauthor
 * Never mention yourself in commit messages in any way (no "Generated by", no AI tool links, etc)

## Writing Style Guide

 * Never add full stops to Markdown list items
